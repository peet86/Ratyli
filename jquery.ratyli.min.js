// Ratyli: jquery rating plugin
// version 0.2.1
// (c) 2015 Peter Varga [info@vargapeter.com]
// released under the Apache 2.0 license
(function(e){e.ratyli=function(t,n){var r=this;r.$el=e(t);r.el=t;r.$el.data("ratyli",r);r.init=function(){r.options=e.extend({},e.ratyli.defaultOptions,n);r.options=e.extend({},r.options,r.$el.data());r.set(r.options.rate,true);r.$el.on("click","> *",function(t){if(!r.options.disable){var n=t.target;if(n.tagName!="SPAN")n=n.parentNode;r.options.onSignClick.call(r,n);var i=e(n).prevAll().length+1;r.set(i)}});r.$el.on("mouseenter","> *",function(t){var n=t.target;if(n.tagName!="SPAN")n=n.parentNode;if(!r.options.disable){e(n).addClass("rate-active");e(n).prevAll().addClass("rate-active")}r.options.onSignEnter.call(r,n)});r.$el.on("mouseleave","> *",function(t){var n=t.target;if(n.tagName!="SPAN")n=n.parentNode;if(!r.options.disable){e(n).removeClass("rate-active");e(n).prevAll().removeClass("rate-active")}r.options.onSignLeave.call(r,n)})};r.set=function(e,t){if(e<0||e%1!=0||e>r.options.max)e=0;r.options.rate=e;r.$el.html("");var n=0;while(n<r.options.max){var i="";if(n<r.options.rate){i=r.signTemplate("full")}else{i=r.signTemplate("empty")}r.$el.append(i);n++}if(!t&&!r.options.disable)r.$el.addClass("rated");r.options.onRated.call(r,e,t);return r.options.rate};r.signTemplate=function(e){return"<span class='rate rate-"+e+"' style='cursor:"+r.options.cursor+";'>"+r.options[e]+"</span>"};r.init()};e.ratyli.defaultOptions={disable:false,full:"★",empty:"☆",cursor:"default",rate:0,max:5,onSignEnter:function(){},onSignLeave:function(){},onSignClick:function(){},onRated:function(){}};e.fn.ratyli=function(t){return this.each(function(){new e.ratyli(this,t)})}})(jQuery)
