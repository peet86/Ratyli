(function(e){e.ratyli=function(t,n){var r=this;r.$el=e(t);r.el=t;r.$el.data("ratyli",r);r.init=function(){r.options=e.extend({},e.ratyli.defaultOptions,n);r.options=e.extend({},r.options,r.$el.data());r.set(r.options.rate,true);r.$el.on("click","> *",function(t){if(r.options.interactive){r.options.onSignClick.call(r,t);var n=e(t.target).prevAll().length+1;r.set(n)}});r.$el.on("mouseenter","> *",function(t){if(r.options.interactive){e(t.target).addClass("rate-active");e(t.target).prevAll().addClass("rate-active")}r.options.onSignEnter.call(r,t)});r.$el.on("mouseleave","> *",function(t){if(r.options.interactive){e(t.target).removeClass("rate-active");e(t.target).prevAll().removeClass("rate-active")}r.options.onSignLeave.call(r,t)})};r.set=function(e,t){if(e<0||e%1!=0||e>r.options.max)e=0;r.options.rate=e;r.$el.html("");var n=0;while(n<r.options.max){var i="";if(n<r.options.rate){i=r.signTemplate("full")}else{i=r.signTemplate("empty")}r.$el.append(i);n++}if(!t&&r.options.interactive)r.$el.addClass("ratyli-rated");r.options.onRated.call(r,e,t);return r.options.rate};r.signTemplate=function(e){return"<span class='rate rate-"+e+"' style='cursor:"+r.options.cursor+";'>"+r.options[e]+"</span>"};r.init()};e.ratyli.defaultOptions={interactive:true,full:"★",empty:"☆",cursor:"default",rate:0,max:5,onSignEnter:function(){},onSignLeave:function(){},onSignClick:function(){},onRated:function(){}};e.fn.ratyli=function(t){return this.each(function(){new e.ratyli(this,t)})}})(jQuery)
